%! Author = Jander Moreira (moreira.jander@gmail.com)
%! Date = 25/04/2025

\documentclass[a4paper, 11pt]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[brazilian]{babel}

\usepackage[presets]{packdoc}
\PDSetElement{Macro}{index remark = {}, no group index}
\PDSetElement{Option}{index remark = {}, no group index}
\usepackage{ppc-ufscar}
\usepackage{hvlogos}
\usepackage{todonotes}

\title{
    A classe \PackageName{ppc-ufscar}\\
    \small V.\PPCVersion\\
    \url{https://github.com/jandermoreira/ppc-ufscar}
}
\author{Jander Moreira\\\footnotesize\texttt{moreira.jander@ufscar.br}}
\date{}

\begin{document}
\maketitle

\PDNewVersion{0.1}{2025-04-25}
\PDAddChange{0.1}{
    description = Versão inicial.,
    no page,
    no box,
}
\PDPrintChanges


\section{Introdução}
Esta classe é o resultado do trabalho realizado nas reformulações dos cursos de Bacharelado em Engenharia da Computação e Bacharelado da Ciência da Computação em 2024. Durante a elaboração do documento, um mecanismo mais robusto para ``automatizar'' certas partes da escrita foram necessários.


\section{Como usar a classe ou o pacote}
Para usar a classe, o documento deve especificar \PackageName{ppc-ufscar} em \Macro{documentclass}.

\begin{PDListing}
    \documentclass{ppc-ufscar}
\end{PDListing}

A classe é desenvolvida sobre a classe padrão \PackageName{report}. Alternativamente, parte dos recursos podem ser usados em outras classes e devem ser carragados como um pacote.

\begin{PDListing}
    \documentclass[a4paper, 11pt]{article}  % por exemplo
    \usepackage{ppc-ufscar}
\end{PDListing}

Quando carregado como pacote, os ajustes relativos ao leiaute não são usados, como margens e espaçamento de linhas, por exemplo.

A classe será disponibilizada no CTAN\footnote{\url{https://ctan.org}.} quando atingir uma maturidade mínima.


\section{Organização de arquivos}
Quando um documento é criado com a classe \PDInline{ppc-ufscar} uma estrutura fixa de arquivos é considerada.

\begin{center}
    \begin{tabular}{lp{0.7\linewidth}}
        \textbf{Arquivo}                   & \textbf{Conteúdo}                                                            \\
        \hline
        \FileName{descricao-curso.tex}     & Contém as descrições do curso.                                               \\
        \FileName{relacao-disciplinas.tex} & Contém as descrições das diversas disciplinas ou comandos para sua inclusão. \\
        \hline
    \end{tabular}
\end{center}

Um exemplo completo está incluído neste pacote.


\section{Descrição dos rescursos}
Considerando-se a parte prática do uso do pacote, nesta seção é descrito como usar os recursos essenciais para a criação do PPC.

\subsection{Descrição do curso}

Este são os comandos usados no arquivo \FileName{descricao-curso.tex}.

\subsubsection{Detalhamento das informações do curso}

\begin{Macrodef}{PPCDefinaFichaDescritiva}{\MArg{lista-de-atributos}}{}
    Este comando é usado para especificar os diversos atributos do curso. Há uma lista de atributos obrigatórios; outros tantos podem ser opcionalmente incluídos.

    Os atributos obrigatórios são \ATListForEach{obrigatórios-curso}{\atributo}[{ e }{, }{ e }{}]{\mbox{\texttt{\atributo}}}, usado para compor a capa (veja \MacroRef{PPCCapa}).

    Cada um dos atributos pode ser usado com \MacroRef{PPCInfo}.
\end{Macrodef}

\begin{PDListing}
    \PPCDefinaFichaDescritiva{
        instituição = {Universidade Federal de São Carlos},
        curso = {Bacharelado em Alguma Coisa},
        campus = {São Carlos},
        centro = {Centro de Ciências Aleatórias},
        ano = {2025},
        modalidade = {Presencial},
        vagas = {60 anuais},
        turno = {Integral},
        carga horária = {3240},
        regime = {Semestral},
        duração = {8 semestres},
        duração mínima = {6 semestres},
        duração máxima = {14 semestres},
        ato legal = {Parecer 1522/79 de 11 de novembro de 1979},
        última reformulação = {2018},
        local = {São Carlos -- SP},
    }
\end{PDListing}

Como apresentar uma disciplina com o comando \MacroDef{PPCFichaDescritiva}.

Ficha de caracterização: atributos já com texto descritivo: \ATForEach{\Atributo}{
    universidade, curso, campus, centro, ano, modalidade, vagas,
    turno, carga horária, regime, duração, duração mínima, duração máxima,
    ato legal, última reformulação, local
}[{ e }{, }{ e }{.}]{\mbox{\texttt{\Atributo}}}

Criação de novos atributos:

\begin{PDListing}
    \PPCDefinaTextoDescricao{
        reunião ordinária = {Reunião de aprovação},
        aprovação conselho = {Data da reunião},
    }
    \PPCDefinaFichaDescritiva{
        reunião ordinária = {321ª Reunião Ordinária do CC-AC},
        aprovação conselho = {30 de fevereiro de 2025},
    }
\end{PDListing}

Os itens serão automaticamente incluídos na ficha de descrição.

A vírgula separando os itens é essencial.

\subsubsection{Detalhamento das informações da apresentação institucional}
A dados institucionais (ou segunda página) é descrita com \MacroRef{PPCDefinaDadosInstitucionais}.

\begin{Macrodef}{PPCDefinaDadosInstitucionais}{}{}
    Define o conteúdo da dados-institucionais.
\end{Macrodef}

\todo{Corrigir para novo formato}
\begin{PDListing}
    \PPCDefinaDadosInstitucionais{
        unidade = {\PPCInfo{instituição}},
        pessoa = {Reitora}{Profa. Dra. Fulana de Tal},
        pessoa = {Vice-Reitora}{Profa. Dra. Ciclana de Tal},
        pessoa = {Pró-Reitor de Graduação}{Prof. Dr. Ciclano de Tal},
        unidade = {\PPCInfo{centro}},
        pessoa = {Diretor}{Prof. Dr. Fulano de Tal},
        pessoa = {Vice-Diretor}{Prof. Dr. Fulano de Tal},
        unidade = {Coordenação de Curso},
        pessoa = {Coordenadora}{Prof. Dra. Beltrana de Tal},
        pessoa = {Vice-Coordenador}{Prof. Dr. Beltrano de Tal},
        pessoa = {Secretária}{Sra. Beltrana de Tal},
        unidade = {Núcleo Docente Estruturante},
        pessoa = {}{Prof. Dr. Fulano de Tal},
        pessoa = {}{Prof. Dr. Fulano de Tal},
        pessoa = {}{Prof. Dr. Fulano de Tal},
        pessoa = {}{Prof. Dr. Fulano de Tal},
        pessoa = {}{Prof. Dr. Fulano de Tal},
    }
\end{PDListing}

A apresentação da ficha é feita com \MacroRef{PPCDadosInstitucionais} e as informações são apresentadas na ordem especificada.

Os atributos permitidos são \texttt{unidade} e \texttt{pessoa}. A unidade pode ser a Universidade, o Centro, a Coordenação de Curso ou outro, sendo apresentada em detaque. Cada pessoa é especificada por dois elementos: o cargo e o nome.

\begin{PDListing}
    cargo = {Coordenador de Curso},
    pessoa = {Prof. Dr. Fulano M. Silva de Tal},
\end{PDListing}

A vírgula separando os itens é essencial.

\subsection{Definição de disciplina}

\begin{PDExample}
    \PPCDefinaDisciplina{cálculo1}{
        nome = {Cálculo Diferencial e Integral 1},
        pré-requisitos = {algelin},
        horas teóricas = 90,
    }
    A disciplina \PPCDisciplina{cálculo1}{nome} possui carga horária total de \PPCDisciplina{cálculo1}{horas teóricas}h.
\end{PDExample}

\subsection{Especificação da grade curricular}


\section{Recursos de compilação condicional}
\index{Overleaf}%
\index{timeout@\textit{timeout}}%
Os projetos que usam a classe \PackageName{ppc-ufscar} tendem usar uma quantidade relativamente alta de recursos do \LaTeX\ e também aumentam o tempo de compilação. Em particular, quando usado no Overleaf\footnote{\url{https://www.overleaf.com}.}, é comum que a compilação falhe por \textit{timeout} (reduzido para 20~segundos para as contas grátis em 2024).


\section{Descrição de recursos escrita}

\begin{Macrodef}{PPCInfo}{\MArg{nome}}{}
    Resulta no atributo de curso especificado com \MacroRef{PPCDefinaFichaDescritiva}.
\end{Macrodef}

\begin{PDExample}
    \PPCDefinaFichaDescritiva{
        centro = {Centro de Ciências Exotéricas},
        ano = {2025},
    }
    O curso pertence ao \PPCInfo{centro} e foi concluído em \PPCInfo{ano}.
\end{PDExample}

Os diversos atributos podem ser, ainda, manipulados conforme descrito no pacote \PackageName{attrtoolbox}.


\section{Opções}
Uma série de opções de configuração estão disponíveis e podem ser definidas pelo comando \MacroRef{PPCConfig}.

\begin{Macrodef}{PPCConfig}{\MArg{lista-de-opções}}{}
    O comando \Macro{PPCConfig} aceita uma \Argument{lista-de-opções} separadas por vírgulas. As opções são descritas ao longo desta seção.
\end{Macrodef}

\subsection{Para a classe \PDInline{ppc-ufscar}}
Quando o documento é criado usando a classe \PDInline{ppc-ufscar} (com \Macro{documentclass}\PArg{ppc-ufscar}), as folhas de capa, dos dados institucionais e da ficha descritiva são automaticamente criados.

Caso seja necessário suprimir alguma delas, as opções \OptionRef{sem capa}, \OptionRef{sem dados institucionais} e \OptionRef{sem ficha descritiva} podem ser usadas.

\begin{Optiondef}{sem~capa}{}{}
    Esta opção suprime a criação automática da capa do documento. A capa pode ser gerada manualmente pelo comando \MacroDef{PPCCapa}.
\end{Optiondef}

\begin{Optiondef}{sem~dados~institucionais}{}{}
    Esta opção suprime a criação automática da relação de dados institucionais. A relação pode ser gerada manualmente pelo comando \MacroDef{PPCDadosInstitucionais}.
\end{Optiondef}

\begin{Optiondef}{sem~ficha~descritiva}{}{}
    Esta opção suprime a criação automática da ficha descritiva do curso. A ficha pode ser gerada manualmente pelo comando \MacroDef{PPCFichaDescritiva}.
\end{Optiondef}

\begin{PDExample}
    \PPCConfig{
        sem capa,  % omite a capa
        sem ficha descritiva,  % omite a ficha descritiva
    }
    % a relação dos dados institucionais não é suprimida!
\end{PDExample}

\section{Ainda por fazer}
Esta é uma \textit{lista de desejos} que podem ou não ser concretizados no futuro:

\begin{itemize}
    \item Substituição do texto usado nas bibliografias das disciplinas por uma lista de rótulos \BibTeX\ para formatação automática segundo a ABNT.
    \item Geração de grade de disciplinas com conexões representando pré-requisitos.
\end{itemize}

\printindex

\end{document}
