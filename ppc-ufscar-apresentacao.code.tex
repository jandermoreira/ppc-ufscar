%! Author = Jander Moreira
%! Date = 10/10/2025
%! Package = ppc-ufscar

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% APRESENTAÇÃO DE INFORMAÇÕES

\RequirePackage{titlesec}
\RequirePackage{array}


% PPCCapa: gera a página de capa
\NewDocumentCommand{\PPCCapa}{}{
    \pagestyle{empty}
    \begin{center}
        \large\textsc{\PPCInfo{instituição}}\par
        \textsc{\PPCInfo{centro}}\par
        \vfill
        \begin{minipage}{0.8\linewidth}
            \begin{center}
                \LARGE\textsc{\textbf{\PPCInfo{curso}}}
            \end{center}
        \end{minipage}\par
        \bigskip
        \large\textbf{---~~Projeto Pedagógico de Curso~~---}\par
        \vfill
        \vspace*{10em}\PPCInfo{local}\par
        \PPCInfo{ano}
    \end{center}
    \clearpage
    \setcounter{page}{0}
}

% PPCDadosInstitucionais: gera a apresentação da instituição,
%   suas unidades e pessoas
\NewDocumentCommand{\PPCDadosInstitucionais}{}{
    \pagestyle{empty}
    \begingroup
    \singlespacing
    \begin{center}
        \ATListForEach{dados-institucionais}{\Item}{\Item\par}
    \end{center}
    \endgroup
    \clearpage
    \setcounter{page}{1}
    \ATListCreate{dados-institucionais}  % limpa para salvar memória
}

% PPCFichaDescritiva: apresenta a ficha descritiva
\NewDocumentCommand{\PPCFichaDescritiva}{}{
    \pagestyle{empty}
    \begingroup
    \begin{center}
        \large
        \textbf{Ficha Descritiva do Curso}
    \end{center}
    \vspace{3em}
    \begin{center}
        \ATListForEach{itens-ficha-descritiva}{\Item}{%
            \noindent
            \parbox[t]{0.4\linewidth}{%
                \raggedleft
                \ATAttributeIfExist[curso]{texto \Item}{
                    \textbf{\PPCInfo{texto \Item}:}%
                }{\textcolor{red}{\textbf{Texto não definido}}:}
            }%
            \hspace{0.02\linewidth}%
            \parbox[t]{0.5\linewidth}{\PPCInfo{\Item}}%
            \par
        }
    \end{center}
    \endgroup
    \clearpage
    \setcounter{page}{1}
    \ATListCreate{dados-institucionais}  % salva memória
}

% PPCFichaDisciplina: apresenta a descrição da disciplina
% #1: id da disciplina
\NewDocumentCommand{\PPCFichaDisciplina}{ m }{
    \begingroup
    \singlespacing
    \begin{tabular}{>{\bfseries\raggedright}p{0.25\linewidth}<{:}p{0.70\linewidth}}
        \hline
        Nome                      & \textbf{\PPCDisciplina{#1}{nome}}             \\
        \hline
        Código                    & \PPCDisciplina{#1}{código}                    \\
        \hline
        Objetivo                  & \PPCDisciplina{#1}{objetivo}                  \\
        \hline
        Ementa                    & \PPCDisciplina{#1}{ementa}                    \\
        \hline
        Carga horária &
        \ATForEach{\TipoHora}{teóricas, práticas, extensionistas, estágio}[{ e }{, }{ e }{}]{\PPCDisciplina{#1}{horas \TipoHora}h \TipoHora} \\
        \hline
        Departamento responsável  & \PPCDisciplina{#1}{departamento}              \\
        \hline
        Bibliografia básica       & \PPCDisciplina{#1}{bibliografia básica}       \\
        \hline
        Bibliografia complementar & \PPCDisciplina{#1}{bibliografia complementar} \\
        \hline
        Competências              & \textit{A ser feito\ldots}                    \\
        \hline
    \end{tabular}
    \endgroup
}
